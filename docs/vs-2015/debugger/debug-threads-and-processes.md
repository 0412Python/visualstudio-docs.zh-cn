---
title: 调试线程和进程 |Microsoft Docs
ms.custom: ''
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.reviewer: ''
ms.suite: ''
ms.technology:
- vs-ide-debug
ms.tgt_pltfrm: ''
ms.topic: article
dev_langs:
- FSharp
- VB
- CSharp
- C++
helpviewer_keywords:
- multiprocess debugging
- threading [Visual Studio], debugging
- processes, debugging
- debugging threads
- debugging [Visual Studio], threads
ms.assetid: 9f0c8505-b6b2-452b-adfd-076db14d8115
caps.latest.revision: 18
author: MikeJo5000
ms.author: mikejo
manager: ghogen
ms.openlocfilehash: d0a42ed90275bb8988bb6bedc0b707aec21ab3b8
ms.sourcegitcommit: af428c7ccd007e668ec0dd8697c88fc5d8bca1e2
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 11/16/2018
ms.locfileid: "51802611"
---
# <a name="debug-threads-and-processes"></a>调试线程和进程
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

线程 * 并*进程*是计算机科学中相关的概念。 二者都表示必须按特定顺序执行的指令序列。 但是不同线程或进程中的指令可以并行执行。  
  
 进程存在于操作系统内，并对应于用户可看作为程序或应用程序的事物。 另一方面，线程存在于进程内。 出于此原因，线程有时称为*轻量进程*。 每个进程都由一个或多个线程组成。  
  
 多个进程的存在使得计算机能够一次执行多个任务。 而多个线程的存在使得进程能够分解工作以便并行执行。 在多处理器计算机上，进程或线程可以在不同的处理器中运行。 这使得真正的并行处理成为可能。  
  
 并不总是能够完全并行处理。 有时候必须要同步线程。 一个线程可能必须等待另一个线程的结果，或者一个线程可能需要独占访问另一个线程正在使用的资源。 同步问题是多线程应用程序中出现 Bug 的一个常见原因。 有时候线程可能最终等待的是永远不会变得可用的资源。 这会导致一种称为状况*死锁*。  
  
 [!INCLUDE[vsprvs](../includes/vsprvs-md.md)] 调试器为调试线程和进程提供了功能强大但易于使用的工具。  
  
## <a name="tools-for-debugging-threads-and-processes-in-visual-studio"></a>Visual Studio 中用于调试线程和进程的工具  
 用于处理进程中的主要工具[!INCLUDE[vsprvs](../includes/vsprvs-md.md)]都**附加到进程**对话框中，**进程**窗口中，和**调试位置**工具栏。 调试的线程的主要工具是**线程**窗口中，源窗口中的线程标记和**调试位置**工具栏。  
  
 用于调试多线程应用程序的主要工具是**并行堆栈**并**并行任务**，**并行监视**，和**的GPU线程** windows。  
  
 下表显示了可用信息以及可在以上每个位置执行的操作：  
  
|用户界面|可用信息|可以执行的操作|  
|--------------------|---------------------------|-----------------------------|  
|**附加到进程**对话框|可以附加的可用进程：<br /><br /> 进程名称 (.exe)<br />-进程 ID 号<br />-菜单栏标题<br />类型 (托管 v4.0;托管的 v2.0、 v1.1、 版本 1.0;x86;x64;IA64)<br />-用户名 （帐户名称）<br />-会话数|选择要附加的进程<br /><br /> 选择远程计算机<br /><br /> 更改用于连接远程计算机的传输类型|  
|**进程**窗口|附加的进程：<br /><br /> 进程名称<br />-进程 ID 号<br />-进程.exe 的路径<br />-菜单栏标题<br />状态 （中断。 运行）<br />-调试 （本机、 托管，依次类推。）<br />-传输类型 （默认值，不进行身份验证时仅限本机）<br />-传输限定符 （远程计算机）|工具：<br /><br /> 附加<br />分离<br />-终止<br /><br /> 快捷菜单：<br /><br /> 附加<br />分离<br />-调试停止时分离<br />-终止|  
|**线程**窗口|当前进程中的线程：<br /><br /> 线程 ID<br />-托管 ID<br />-类别 （主线程、 接口线程、 远程过程调用处理程序或工作线程）<br />线程名称<br />-创建线程的位置<br />优先级<br />关联掩码<br />-挂起项计数<br />进程名称<br />-标记标识符<br />-挂起项指示器|工具：<br /><br /> -搜索<br />搜索调用堆栈<br />-标志仅我的代码<br />-标记自定义模块选择<br />-分组依据<br />-列<br />-展开/折叠调用堆栈<br />-展开/折叠组<br />-冻结/解冻线程<br /><br /> 快捷菜单：<br /><br /> -在源中显示线程<br />-切换到线程<br />-冻结正在运行的线程<br />-解冻冻结的线程<br />-标记一个线程以便进一步研究<br />-取消标记线程<br />-重命名一个线程<br />-显示和隐藏线程<br /><br /> 其他操作：<br /><br /> -在数据提示中查看线程的调用堆栈|  
|源窗口|在左滚动条槽中的线程指示符指示单线程或多个线程 (默认情况下，使用快捷菜单中的打开关闭**线程**窗口)|快捷菜单：<br /><br /> -切换到线程<br />-标记一个线程以便进一步研究<br />-取消标记线程|  
|**调试位置**工具栏|-当前进程<br />-挂起应用程序<br />-恢复应用程序<br />-挂起并关闭该应用程序<br />-当前线程<br />-切换当前线程标记状态<br />-仅显示已标记的线程<br />-仅显示当前进程<br />-当前堆栈帧|-切换到另一个进程<br />-挂起、 继续或关闭应用程序<br />-切换到当前进程中的另一个线程<br />-切换到当前线程中的另一个堆栈帧<br />-标记或取消标记当前线程<br />-仅显示已标记的线程<br />-仅显示当前进程|  
|**并行堆栈**窗口|-对于一个窗口中的多个线程调用堆栈。<br />的每个线程的活动堆栈帧。<br />-调用方和被调用方的任何方法。|-筛选出指定的线程<br />-切换到并行任务视图<br />-标记或取消标记线程<br />缩放|  
|**并行任务**窗口|-查看有关的信息<xref:System.Threading.Tasks.Task>对象包括任务 ID、 任务状态 （计划的、 正在运行，等待，发生死锁），以及哪个线程分配给任务。<br />-当前调用堆栈中的位置。<br />在创建时传递给任务委托|-切换到当前任务<br />-标记或取消标记任务<br />-冻结或解冻任务|  
|**并行监视**窗口|的将标记要特别注意的线程标记列。<br />的在其中一个箭头指示选定的帧帧列。<br />-可配置的列可显示计算机、 进程、 磁贴、 任务和线程。|-标记或取消标记线程<br />仅显示标记的线程<br />切换帧<br />-对列进行排序<br />-组线程<br />-冻结或解冻线程<br />-导出并行监视窗口中的数据|  
|**GPU 线程**窗口|的将标记要特别注意的线程标记列。<br />的其中一个黄色箭头指示活动线程活动线程列。 箭头指示执行在调试器中分解的线程。<br />-**线程计数**列，在同一位置显示的线程数。<br />-**行**列，显示的每组线程所在的位置的代码行。<br />-**地址**列，显示每组线程所在的位置的指令地址。<br />-**位置**列中，这是在代码中的地址的位置。<br />-**状态**列，显示的线程是否有效或锁定。<br />-**磁贴**列，显示的行中的线程的平铺索引。|-将更改为不同的活动线程<br />-显示特定平铺和线程<br />-显示或隐藏列<br />-按列排序<br />-组线程<br />-冻结或解冻线程<br />-标记或取消标记线程<br />仅显示标记的线程|  
  
## <a name="see-also"></a>请参阅  
 [将附加到正在运行的进程](../debugger/attach-to-running-processes-with-the-visual-studio-debugger.md)   
 [调试多线程应用程序](../debugger/debug-multithreaded-applications-in-visual-studio.md)   
 [调试 GPU 代码](../debugger/debugging-gpu-code.md)



