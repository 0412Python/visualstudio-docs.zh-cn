---
title: "菜单和命令 for Visual Studio |Microsoft 文档"
ms.custom: 
ms.date: 11/04/2016
ms.reviewer: 
ms.suite: 
ms.technology: vs-ide-sdk
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 0a1ed675-2bd1-4603-ba3a-f40dfb5cfb69
caps.latest.revision: "4"
author: gregvanl
ms.author: gregvanl
manager: ghogen
ms.openlocfilehash: 408a496b78defbca928420f39ebdf9e9de718019
ms.sourcegitcommit: f40311056ea0b4677efcca74a285dbb0ce0e7974
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 10/31/2017
---
# <a name="menus-and-commands-for-visual-studio"></a>菜单和 for Visual Studio 命令
## <a name="command-usage"></a>命令用法  
  
### <a name="overview"></a>概述  
 与 Microsoft Office，这是一个套件，它包含许多单独的产品，不同 Visual Studio 包含许多产品，每个参与到全局 Visual Studio IDE 其命令集。 IDE 通过筛选可供用户使用基于上下文的功能管理数千个命令的复杂性。  
  
 当用户的上下文更改-如从设计窗口切换到编辑窗口的代码不相关的功能时将消失新的上下文。 在相同的时间，以及相关的动态信息，例如属性和工具箱选项的新功能图面。 用户应不会注意到可用的命令集的交换。 如果用户是分散或混淆命令显示或消失，UI 设计需要调整。 用户的当前上下文始终在一个或多个方面，如在标明 IDE 标题栏、 属性窗口或属性页对话框。  
  
 命令栏，可在 UI 中的灵活性。 唯一的命令结构固有到 Visual Studio 环境是在主菜单和主要的命令栏中，该值可同时进行自定义，即使隐藏。 其他命令栏出现和消失基于对应用程序的状态。 工具窗口和文档编辑器还可以包含在其窗口边界内的嵌入的工具栏。  
  
#### <a name="basic-guidelines"></a>基本指导原则  
  
##### <a name="use-existing-shared-commands-command-groups-and-menus-whenever-possible"></a>使用现有共享的命令、 命令组和尽可能的菜单。  
 由于命令基于上下文通常所示，使用现有共享的菜单和命令组可确保命令结构保持相对稳定之间上下文中的更改。 重用共享的命令并将放入新的命令接近相关共享命令还降低了 IDE 的复杂性，并创建更加友好的用户体验。 如果需要定义一个新的命令，请尝试将其放在现有共享的命令组。 如果需要定义新的组，将其放在现有共享接近相关的命令组菜单中创建新的顶级菜单之前。  
  
##### <a name="do-not-create-icons-for-every-command"></a>不要创建每个命令的图标。  
 在创建命令图标之前请仔细考虑。 应仅对命令中创建图标的：  
  
-   在默认工具栏上显示。  
  
-   很可能由用户添加到通过工具栏**自定义...**对话框。  
  
-   具有与另一个 Microsoft 产品中相同的操作关联的图标。  
  
##### <a name="limit-the-addition-of-keyboard-shortcuts"></a>限制添加键盘快捷方式  
 大多数用户使用所有可用的快捷方式有极小一部分。 当有疑问时，不将绑定你的功能的键盘快捷方式。 使用你的用户的工作添加新的快捷方式遭遇团队。  
  
##### <a name="give-commands-a-default-menu-placement"></a>为命令提供默认菜单放置。  
 请注意，你的命令将通过其他自定义，并且相应地设计它们。 隐藏的命令没有此类的内容。 所有 Visual Studio 命令显示在**工具 > 自定义**对话框中，命令窗口中，自动完成**工具 > 选项 > 键盘**对话框中和开发工具环境 (DTE)。 请确保为你的命令，指定名称和.ctc 文件中的工具提示，以便用户可以轻松地找到它们。  
  
##### <a name="do-not-duplicate-shared-commands-on-an-embedded-toolbar"></a>不复制在嵌入的工具栏上的共享的命令。  
 它可用于将命令放在紧靠的用户的焦点区域。 若要执行此操作的一种方法是在工具窗口或文档的顶部编辑器创建嵌入式工具栏。 置于工具栏上的命令应为特定于窗口内的内容区域。 不复制这些工具栏上的共享的命令。 例如，永远不会放置在嵌入式工具栏上的"保存"图标。  
  
### <a name="content-and-command-visibility"></a>内容和命令的可见性  
 在以下作用域中存在的命令：**环境**，**层次结构**，和**文档**。 知道才能命令放置在可确信每个作用域。  
  
 中的命令**环境**作用域建立主上下文和多个上下文之间共享。 但改变的可见性或排列的文档和工具窗口。 在环境中的命令作用域包括**新项目**，**连接到服务器**，**附加进程**，**剪切**， **复制**，**粘贴**，**查找**，**选项**，**自定义**，**新窗口**，和**查看帮助**。  
  
 中的命令**层次结构**作用域管理层次结构在 Visual Studio 包括**项目**，**团队**，和**数据**。 例如，与项目的子上下文-**调试**，**生成**，**测试**，**体系结构**，或**分析**. 作用域包括层次结构中的命令**添加新项**，**新查询**，**项目设置**，**添加新数据源**， **启动性能向导**，和**新关系图**。  
  
 中的命令**文档**作用域作用于内容的文档，如代码、 设计或工作项查询 (WIQ)。 它们还充当视图的工具窗口或否则是特定于该工具窗口。 文档作用域命令还处理它们本身层次结构特定，如文件对象**从项目中删除**。 作用域包括文档中的命令**重构 > 重命名**，**创建工作项的副本**，**全部展开**，**全部折叠**，和**创建用户任务**。  
  
### <a name="command-placement-decisions"></a>命令放置决策  
 一旦你已决定要创建命令，你将需要确定及其相应的位置以及是否创建的键盘快捷方式。 请按照此决策路径来指定该命令的放置位置：  
  
 ![命令放置决策图表](../../extensibility/ux-guidelines/media/0501-a_commandplacement.png "0501 a_CommandPlacement")  
  
 **用于 Visual Studio 中的命令放置决策路径**  
  
### <a name="command-placement-in-menus"></a>在菜单命令放置  
  
#### <a name="main-menu-bar"></a>主菜单栏  
 主菜单栏应贡献 UI 的任何特定于上下文菜单包的命令的标准位置。 主菜单栏区别于其他命令结构，因为环境可使用它到哪些命令是可见的控件。 所有其他命令栏只需禁用命令上下文，不在放在一个菜单或工具栏上。  
  
 环境定义了一套内置的主菜单栏共有跨整个 IDE 和多个任务域的命令。 这些命令将始终可见无论其中 Vspackage 加载到环境。 虽然 Vspackage 可以延长此命令集，但命令集从每个产品和其命令的位置是每个团队的责任。  
  
 Visual Studio 主菜单的结构可以分为以下菜单类别：  
  
##### <a name="core-menus"></a>核心菜单  
  
-   文件  
  
-   编辑  
  
-   视图  
  
-   工具  
  
-   窗口  
  
-   帮助  
  
##### <a name="project-specific-menus"></a>特定于项目的菜单  
  
-   Project  
  
-   生成  
  
-   调试  
  
##### <a name="context-specific-menus"></a>特定于上下文菜单  
  
-   团队  
  
-   数据  
  
-   测试  
  
-   体系结构  
  
-   分析  
  
##### <a name="document-specific-menus"></a>特定于文档的菜单  
  
-   格式  
  
-   表  
  
##### <a name="when-designing-main-menus-adhere-to-these-rules"></a>在设计时主菜单，遵循这些规则：  
  
-   不能超过 25 个给定的上下文中的顶级项目  
  
-   菜单应该永远不会超过 600 像素高。  
  
-   Ultimate SKU 和常规配置文件中，如评估在多个上下文中，一个主菜单。  
  
-   弹出菜单均可接受。  
  
-   弹出菜单应包含至少三个项和不能超过七个。  
  
-   深层弹出菜单应该只有一个级别-某些 Visual Studio 的菜单项具有级联子菜单，但不是建议使用此模式。  
  
-   使用不能超过 6 个分隔符。 下图应遵循分组：  
  
     ![主菜单分组指南](../../extensibility/ux-guidelines/media/0501-b_mainmenus.png "0501 b_MainMenus")  
  
-   虽然它不需要具有在图中的每个分组，添加其他分组是受限的。  
  
-   每个分组应具有两个到七个菜单项。  
  
#### <a name="main-menu-ordering"></a>主菜单排序  
 然后再添加新的顶级项，请考虑将该命令放入现有的顶级菜单。 在添加新的顶级菜单时，请务必将其放在正确的位置。 确定菜单是否处于特定于项目、 上下文或文档。 保持的顶级菜单名称简洁并使用只有一个单词。  
  
 核心菜单应书挡其余的命令。 文件、 编辑和视图应始终是到左侧和工具，窗口中，并帮助应始终是右对齐。  
  
#### <a name="context-menus"></a>上下文菜单  
 放置过多的上下文菜单中的功能会导致难以了解接口。 所有主要功能可通过在主菜单栏。 命令放置应与现有的命令，以避免重复命令进行对帐。 上下文菜单中，对于 shell 定义应包括具体取决于上下文菜单是解决方案、 项目节点，或项目项的标准菜单组。  
  
 在设计时上下文菜单，遵循相同的规则与主菜单中，和此外：  
  
-   不超过 25 的顶级菜单项。  
  
-   弹出菜单是可接受，但是必须不能超过一个级别深层-永远不会使用级联弹出项目。  
  
-   使用不能超过 6 个分隔符。  
  
### <a name="command-placement-in-toolbars"></a>在工具栏中的命令放置  
  
#### <a name="general-toolbars"></a>常规工具栏  
 当设计和排列工具栏，请遵循这些标准：  
  
-   不要使用每个按钮的多个谓词。 一个按钮 = 一个操作。  
  
-   仅当它需要被加强标签，请使用图标旁边的文本。  
  
-   使用专用于将在一个会话中多次切换的属性的组合框。 否则，公开的属性在其他位置。  
  
-   组合框的宽度应等于内框 + 30%的最长的项的宽度。 例如，如果最长的项为 200 像素，组合框应为 260 像素宽。  
  
-   分隔符的用法限制。 使用旁边的下拉列表中分隔符是反模式，因为下拉列表中本身形状充当直观分隔符。  
  
-   图标组应包含三到六个图标。  
  
-   如果限定符导致多个有用的命令，使用存储的最后一个设置的拆分按钮：  
  
     ![拆分 Visual Studio 中的按钮](../../extensibility/ux-guidelines/media/0501-c_splitbuttons.png "0501 c_SplitButtons")  
  
     **拆分按钮的示例。在左侧的六个命令可以改为适合于单个按钮。**  
  
#### <a name="product-specific-toolbars"></a>特定于产品的工具栏  
 每个产品可以提供包含经常使用的默认工具栏和重要命令和每个产品的默认工具栏应显示第一次启动 Visual Studio 后安装产品。  
  
 共享的命令组和由 IDE 提供的菜单，还应利用产品。 每个共享的命令组放置在用于整理相关的命令的用户有意义的方式共享菜单中。 请务必以减少复杂性利用此共享的命令结构。  
  
#### <a name="global-toolbars"></a>全局工具栏  
 系统将要求在初始状态下一行右侧适合将全局工具栏。 在创建新的全局工具栏时，遵循该工具栏类型的指南。  
  
 **常规工具栏准则：**  
  
-   每一个工具栏公共控件 （控制手柄、 溢出） 中包含 24 个像素。  
  
-   每个工具栏按钮为 22 像素宽包括填充。 使拆分按钮的图标将添加另一个 11 像素宽。  
  
-   允许跨工具栏命令的重复。  
  
 **特定于文档的工具栏**显示特定文件类型处于活动状态时，并在不同的文件类型将变为活动状态时消失。  
  
-   特定于文档的工具栏不能有多个 12 按钮。  
  
-   工具栏上的总宽度不能超过 300 像素。  
  
-   每种文件类型可以具有一个嵌入的工具栏或一个特定于文档的全局工具栏上，但不是两个。  
  
 **特定于上下文工具栏**当某些上下文时，显示设置，然后倾向于长时间保持活动状态。  
  
-   适用于所有特定于上下文工具栏的按钮限制为 18。  
  
-   如果上下文处于活动状态时，大多数用户不会一致地使用此工具栏的命令，则不将关联此工具栏的上下文。  
  
-   确保，退出上下文时，工具栏将消失。 无这些工具栏应在启动时显示。  
  
 **不带上下文工具栏**永远不会自动显示。 显示这些监视器，仅当用户激活它们。 保留下面 200 像素的最大宽度。  
  
### <a name="general-organization-and-shell-defined-groups"></a>常规组织和命令行程序定义的组  
 使用现有共享的命令、 命令组和菜单。 如果需要定义一个新的命令，请尝试将其放在现有共享的命令组。 如果需要定义新的组，请尝试在创建新的顶级菜单之前将其放在现有共享接近相关的命令组菜单。 这减少了命令复杂性，同时确保一致的命令放置在 IDE 中。  
  
 共享**格式**在下图说明了菜单上，通常显示在设计器样式文档窗口的上下文中：  
  
 ![具有标注的 visual Studio 格式菜单](../../extensibility/ux-guidelines/media/0501-d_formatmenu.png "0501 d_FormatMenu")  
  
 **Visual Studio 中的菜单组**  
  
### <a name="reducing-and-reusing-commands"></a>减少和重用命令  
 命令，将通常显示在上下文中，以减少的用户将看到在任何给定时间的命令数。 但是，你应重复使用现有共享的菜单和命令组，以确保命令结构保持相对稳定之间上下文中的更改。  
  
 重复使用共享的命令并将放入新接近相关共享命令的命令将降低 IDE 复杂性并创建更加友好的用户体验。  
  
## <a name="naming-commands"></a>命名的命令  
  
### <a name="naming-conventions"></a>命名约定  
 一致的命令命名至关重要，以便用户可以查找并执行命令，应通过使用命令行或绑定到的键盘快捷方式的不同而不同。 命令名称还可帮助用户了解哪些命令可在工具栏上或级联或上下文菜单中显示时的用途。  
  
#### <a name="when-naming-commands"></a>命名命令时：  
  
-   构造文本，以便更易于本地化。 有关详细信息本地化文本，请参阅[World for Visual Studio 的准备情况](http://msdn.microsoft.com/en-us/1cc35051-8126-441f-bea9-059245a47b1d)。  
  
-   为简洁。 命令应使用不超过三个单词。  
  
-   使用词首字母大写大小写： 应输入每个单词的第一个字母大小写。 有关 Visual Studio 中的文本格式的详细信息，请参阅[文本样式](../../extensibility/ux-guidelines/fonts-and-formatting-for-visual-studio.md#BKMK_TextStyle)。  
  
-   请考虑在其中放置该命令。 它位于顶级菜单或弹出窗口？ 例如，当浮出控件的顶级命令中的分组对齐命令应为"对齐"和弹出命令应为"Left""右"、"中心，""两端对齐，"等。 它是多余命名浮出控件命令"左对齐"或"Align 右侧"。  
  
     ![Visual Studio 格式菜单](../../extensibility/ux-guidelines/media/0502-a_formatmenu.png "0502 a_FormatMenu")  
  
### <a name="using-icons-with-commands"></a>使用命令图标  
 适当使用图标配对使用命令中使用。 虽然将与命令关联的唯一映像 hastens 用户的能力，以确定该命令，视觉混乱和效率会发生与映像过度使用。 当决定是否要创建一个命令图标时，以下规则帮助。  
  
#### <a name="use-an-icon-with-a-command-only-if"></a>将图标与命令才使用：  
  
-   相同的命令的另一个重要的 Microsoft 产品，例如某个 Microsoft Office 应用程序中与之关联的图标。  
  
-   该命令将放入默认工具栏。  
  
-   该命令是用户很可能将添加到工具栏使用 specialty 命令**"自定义..."**对话框。  
  
## <a name="access-and-shortcut-keys"></a>访问键和快捷键  
  
### <a name="overview"></a>概述  
 有两种类型的键盘按键分配方案：  
  
-   **访问密钥**（也称为加速键） 在对话框中 UI 允许通过菜单的键盘访问针对命令和每个标签。 访问键主要用于可访问性目的、 分配给所有菜单和大多数对话框控件，并不记住，会影响仅当前窗口和已经进行了本地化。  
  
-   **键盘快捷方式**主要使用控件 (Ctrl) 和函数 (Fn) 键顺序。 它们旨在更高级的用户和帮助在工作效率。 它们仅分配的最常用的命令，并且在跳过的主菜单时允许快速访问。 键盘快捷方式旨在所存储，并且该原因必须分配与配置文件方案一致。 快捷方式密钥方案可能会有所不同配置文件到配置文件。 用户可以自定义键盘快捷方式通过**工具 > 选项 > 键盘**。  
  
### <a name="assigning-access-keys"></a>分配访问键  
 访问键包含 Alt 加上字母数字键。 向每个菜单项，但异常分配访问键。 遵循 Windows 和分配访问键的常见约定。 例如，对于访问密钥**文件 > 新建**应始终为**Alt，F，N**。  
  
 不使用单像素宽度字母，如 i （在大写或小写） 或小写 l，并避免使用与下行字母 （g、 j、 p、 q 和 y） 字符，因为这些是难以区分。  
  
 避免使用重复键在可能的情况。 在重复是不可避免的情况下，菜单系统通过循环运行所有命令，使用密钥来处理冲突。 例如，对于"Number"命令下的文件菜单中重复的"N"访问密钥，一个假想**Alt，F，N**将创建一个新的文件，和**Alt、 F、 N 和 N**将执行"Number"命令。  
  
### <a name="assigning-shortcut-keys"></a>分配键盘快捷方式  
 避免分配新键盘快捷方式，因为它们不需要的每个命令和税务系统 （和用户内存） 如果过度使用。 数据从客户体验改善计划 (CEIP) 指示 Visual Studio 用户使用只有一小部分的集成的快捷方式。  
  
 在定义快捷方式时，遵循以下规则：  
  
-   **使用控件 (Ctrl) 和函数 (Fn) 键顺序。**  
  
-   **保留频繁使用的快捷方式。** 维护的最常用的快捷方式。  
  
-   **使编辑器快捷键容易键入。** 绑定到开发人员需要编写代码时的大多数命令的简单类型的快捷方式。 例如， **Edit.InvokeSmartTag**需要快速快捷键如 Ctrl + 和不 Alt + Shift + F10。  
  
-   **尽可能一致地主题快捷方式。**  
  
-   **请遵循 Windows 准则来确定哪些修饰符键使用。** 使用 Ctrl 键组合的大规模的效果，如应用于整个文档的命令的命令。 扩展或补充的操作的标准的快捷键的命令使用 Shift 键组合。 请勿使用 Ctrl + Alt 组合。  
  
-   **删除多余的快捷方式。** 如果你有旧的功能，请考虑删除如果访问密钥提供了相同的命令的快速访问与极少被 （较少比 10 次从 CEIP 数据） 或中等少被 （较少 100 次比从 CEIP 数据） 使用的快捷方式。 例如： Alt，H，C 会打开帮助/内容。  
  
 不是一种简单的方法，以检查快捷可用性。 如果你想要添加的快捷方式，执行以下步骤：  
  
1.  检查的列表[Visual Studio 2013 快捷方式](http://visualstudioshortcuts.com/2013/)以确定是否有进行分组是您使用的类似命令。  
  
2.  转到**工具 > 选项 > 环境 > 键盘**和测试您的快捷方式。 检查每个键盘映射方案列出下的"应用以下其他键盘映射方案"。 检查常规、 C#、 VB 和 c + + 的配置文件，因为这些共享唯一快捷方式。 你快捷方式是如果它未映射任何这些位置中可用。