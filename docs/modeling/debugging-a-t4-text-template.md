---
title: "调试 T4 文本模板 |Microsoft 文档"
ms.custom: 
ms.date: 11/04/2016
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- text templates, troubleshooting
- text templates, debugging
ms.assetid: 0877fdf2-20bf-42da-b3cc-4c5856b80821
caps.latest.revision: 28
author: alancameronwills
ms.author: awills
manager: douge
translation.priority.ht:
- cs-cz
- de-de
- es-es
- fr-fr
- it-it
- ja-jp
- ko-kr
- pl-pl
- pt-br
- ru-ru
- tr-tr
- zh-cn
- zh-tw
translationtype: Machine Translation
ms.sourcegitcommit: 5db97d19b1b823388a465bba15d057b30ff0b3ce
ms.openlocfilehash: 5b6cb4a83e6aa06f6b29987893232d8b6e203c56
ms.lasthandoff: 02/22/2017

---
# <a name="debugging-a-t4-text-template"></a>调试 T4 文本模板
您可以在文本模板中设置断点。 若要调试设计时文本模板，请保存文本模板文件，，然后选择**调试 T4 模板**解决方案资源管理器中的文件的快捷菜单上。 若要调试运行时文本模板，只需调试它属于该应用程序。  
  
 若要调试文本模板，您应该了解模板转换过程的步骤。 不同种类的错误会在每个步骤。 步骤如下所示。  
  
|步骤|设计时模板︰ 当发生|运行时模板︰ 当发生|  
|----------|--------------------------------------------|-----------------------------------------|  
|从文本模板生成代码。<br /><br /> 指令中，错误或不匹配的或 disordered`<#…#>`标记。|当您保存模板，或调用文本转换。|当您保存模板，或调用文本转换。|  
|编译生成的代码。<br /><br /> 模板代码中的编译错误。|紧接着的上一个步骤。|以及您的应用程序代码。|  
|代码运行。<br /><br /> 模板代码中的运行时错误。|紧接着的上一个步骤。|当您的应用程序运行，并且调用模板代码。|  
  
 在大多数情况下，错误报告中提供了模板代码中的行号。 当错误报告引用临时文件名时，则原因通常是在文本模板的代码中的括号不匹配。  
  
 你可以在文本模板中设置断点和调试以通常的方式。  
  
## <a name="common-errors-and-fixes"></a>常见错误和修补程序  
 下表列出最常见的错误和其修补程序。  
  
|错误消息|描述|解决方案|  
|-------------------|-----------------|--------------|  
|未能加载 Transformation 类要继承的基类“{0}”。|如果找不到在指定的基类会发生`inherits`template 指令中的参数。 消息提供了模板指令的行号。|请确保存在指定的类，并且，在一个程序集指令中指定它存在于该程序集。|  
|未能解析文件 {0} 的包含文本|找不到包含的模板时发生。 消息可提供该请求的包含文件的名称。|请确保文件路径是相对于原始模板路径，或该文件位于与主机注册的位置或有该文件的完整路径。|  
|在初始化转换对象时，所生成错误。 该转换将不会运行。|Initialize （） 的转换类失败或返回了 false 时发生。|Initialize （） 函数中的代码来自中指定的基转换类\<#@template#&1;> 指令和指令处理器。 导致初始化可能失败的错误是在错误列表。 调查失败的原因。 您可以查找在实际生成的代码 initialize （） 通过执行以下过程创建模板。|  
|该程序集"{0}"为指令处理器 \ {1 \ 未被授予 FullTrust 权限集。 只有受信任的程序集可以提供指令处理器。 将不会加载此指令处理器。|系统不会包含指令处理器的程序集授予 FullTrust 权限时发生。 消息提供的程序集的名称和指令处理器的名称。|请确保您只在本地计算机上使用受信任程序集。|  
|路径"{0}"必须是本地组到这台计算机，或者受信任区域的一部分。|当指令或程序集指令引用不在本地计算机或网络的受信任区域上的文件，则会出现。|请确保目录指令或程序集指令位于受信任区域。 可以将网络目录添加到受信任区域中，通过 Internet Explorer。|  
|例如，"无效令牌 catch"或"命名空间不能直接包含成员"的多个语法错误|模板代码中的右括号太多。 编译器混淆它与标准生成代码。|检查右大括号和代码分隔符内的方括号的数目。|  
|循环或条件不编译或执行正确。 例如：`<#if (i>10)#> Number is: <#= i #>`。<br /><br /> 此代码始终将输出的值我。 仅"数是:"有条件。|在 C# 中，始终使用大括号括起来控制语句中嵌入的文本块。|添加括号︰ `<#if (i>10) { #>    Number is: <#= i #><# } #>`。|  
|"表达式太复杂"时处理设计时模板或编译运行时 （预处理过的） 模板。<br /><br /> [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)]尝试检查由运行时模板生成的代码时停止工作。|文本块过长。 T4 将文本块转换为一个字符串为每个模板行文本的字符串串联表达式。 很长的文本块可以超越编译器的大小限制。|分解如将表达式块的长文本块︰<br /><br /> `<#= "" #>`|  
  
## <a name="warning-descriptions-and-fixes"></a>警告说明和修补程序  
 下表列出最常见的警告，以及修补程序，如果可用。  
  
|警告消息|描述|解决方案|  
|---------------------|-----------------|--------------|  
|加载包含文件"{0}"返回了 null 或为空字符串。|如果包含的文本模板文件为空，则会发生。 消息提供所包含的文件的文件名。|删除包含指令，或者请确保该文件已经有一些内容。|  
|正在编译转换:|此将字符串追加到所有错误或警告时对其进行编译转换源自于编译器。 此字符串表示编译器引发错误或警告。|如果必须查找该 DLL 的问题，您可能需要提供的完整路径或完全限定的强名称，如果 DLL 是在 gac 中。|  
|在指令中已存在参数"{0}"。 将忽略重复的参数。|当指令中多次指定了参数时出现。 消息提供的名称以及参数指令的行数。|删除重复的参数规范。|  
|加载包含文件"{0}"时出错。 Include 指令将被忽略。|找不到文件中指定时发生`include`指令。 消息提供文件的名称和该指令的行号。|请确保包含文件存在于与原始文本模板文件相同的目录或其中一个已向主机注册的 include 目录中。|  
|为转换类指定了无效的基类。 类的基类必须从 Microsoft.VisualStudio.TextTemplating.TextTransformation 派生。|发生时`inherits`template 指令中的参数指定不继承的类`TextTransformation`。 消息提供了模板指令的行号。|可以指定派生自的类`TextTransformation`。|  
|'Template' 指令中指定的无效的区域性。 区域性必须采用"xx XX"格式。 将使用固定区域性。|当错误地指定了 template 指令中的区域性参数时发生。 消息提供了模板指令的行号。|将区域性参数更改为"xx XX"格式是有效的区域性。|  
|一个无效的调试值"{0}"的 template 指令中指定。 在调试值必须是"true"或"false"。 将使用默认值为"false"。|发生时`debug`错误地指定了 template 指令中的参数。 消息提供了模板指令的行号。|调试参数设置为"true"或"false"。|  
|在模板指令中指定了无效的 HostSpecific 值"{0}"。 HostSpecific 值必须是"true"或"false"。 将使用默认值为"false"。|发生时中的特定于宿主的参数`template`指令未正确指定。 消息提供了模板指令的行号。|特定于宿主的参数设置为"true"或"false"。|  
|'Template' 指令中指定了无效的语言"{0}"。 语言必须是"C#"或"VB"。 将使用"C#"的默认值。|当在指定了不受支持的语言时出现`template`指令。 只有"C#"或"VB"允许 （不区分大小写）。 消息提供了模板指令的行号。|设置`language`到"C#"或"VB"的 template 指令中的参数。|  
|在模板中找到多个输出指令。 除第一个将被忽略。|出现在多个`output`指令在模板文件中指定。 消息提供了重复的输出指令的行数。|删除重复项`output`指令。|  
|在模板中找到多个模板指令。 除第一个将被忽略。 应在一个模板指令中指定多个参数的 template 指令。|如果指定多个则会发生`template`文本模板文件 （包括包含的文件） 中的指令。 消息提供了重复的 template 指令的行号。|聚合不同`template`为一个指令`template`指令。|  
|名为"{0}"的指令指定没有处理器。 将忽略该指令。|如果您指定则会发生`custom`指令，但不是提供`processor`属性。 消息提供的名称以及该指令的行号。|提供`processor`属性同名的`directive`指令处理器。|  
|找不到名为 {1 \} 的指令名为"{0}"的处理器。 将忽略该指令。|当系统无法找到时发生`directive`内指定的处理器`custom`指令。 该消息提供与指令名称、 处理器名称和该指令的行号。|设置`processor`为指令处理器的名称将指令中的属性。|  
|找不到所需的参数"{0}"指令 \ {1 \。 将忽略该指令。|系统未提供所需的指令参数时发生。 消息提供缺少的参数的名称、 与指令名称和行号。|提供缺少的参数。|  
|名为"{0}"的处理器不支持名为 {1 \} 的指令。 将忽略该指令。|指令处理器不支持一个指令时发生。 消息提供指令处理器的名称以及有问题的指令的名称和行的号。|更正该指令的名称。|  
|文件"{0}"include 指令将导致无限循环。|如果循环 include 指令显示指定 （例如，文件 A 包括文件 B，其中包含文件 A）。|未指定循环 include 指令。|  
|正在运行转换:|此将字符串追加到所有错误或运行转换时生成的警告。|不适用。|  
|在块内发现意外的开始或结束标记。 请确保没有错误地键入开始或结束标记，并且您不在模板中包含任何嵌套的块。|在意外情况时显示\<#&1;>。 也就是说，如果您有\<# 之后另一个打开的标记的未关闭，或者您所需 #&1;> 之前没有闭合打开标记时。 消息提供不匹配的标记的行号。|删除不匹配的开始或结束标记，或者使用转义符。|  
|格式不正确中指定的一条指令。 将忽略该指令。 请指定该指令格式`<#@ name [parametername="parametervalue"]*  #>`|如果未以正确的格式指定指令由分析器显示。 消息提供不正确的指令的行号。|请确保该窗体中所有指令`<#@ name [parametername="parametervalue"]*  #>`。 有关详细信息，请参阅[T4 文本模板指令](../modeling/t4-text-template-directives.md)。|  
|无法加载程序集"{0}"为已注册指令处理器 \ {1 \<br /><br /> {2}|无法加载指令处理器，由主机时发生。 此消息标识提供为指令处理器和指令处理器的名称的程序集。|请确保已正确注册指令处理器，以及该程序集是否存在。|  
|未能注册指令处理器 \ {2 \ 在程序集 \ {1 \ 中找到类型"{0}"<br /><br /> {3}|无法从其程序集中加载指令处理器类型时发生。 消息提供的类型、 组件和指令处理器的名称。|该 vshost 在注册表中查找指令处理器信息 （名称、 程序集和类型）。 请确保正确地注册指令处理器和该类型存在于程序集。|  
|加载程序集“{0}”时出现问题|加载的程序集的问题时出现。 消息提供的程序集名称。|您可以指定要在加载程序集\<@# assembly #&1;> 指令，以及指令处理器。 在此字符串后面的错误消息应提供有关程序集加载失败的原因的更多的数据。|  
|存在时创建并初始化用于名为 {1 \} 的指令处理器出现问题。 处理器的类型为 {0}。 将忽略该指令。|当系统无法创建或初始化指令处理器时出现。 该消息提供指令的文件名和行数和处理器的类型。|请确保使用正确的指令处理器，并且指令处理器拥有公共默认构造函数。 否则，使用调试选项来找出指令处理器的 initialize （） 方法失败的原因。 有关详细信息，请参阅[疑难解答文本模板](../modeling/debugging-a-t4-text-template.md)。|  
|处理名为"{0}"的指令时引发了异常。|在处理指令的指令处理器将引发异常时发生。|请确保为指令处理器参数正确。|  
|主机引发了异常时尝试解析程序集引用"{0}"。|当宿主尝试解析程序集引用时引发异常时发生。 该消息提供该程序集引用字符串。|程序集引用来自\<@# assembly #&1;> 指令和指令处理器。 请确保程序集参数中提供的 'name' 参数正确。|  
|尝试进行不受支持的 \ {1 \ 为指定值"{0}"指令 \ {2 \|出现 RequiresProvidesDirectiveProcessor （所有从它派生我们生成的指令处理器），在提供时不受支持，要求，或提供参数。|请确保，在 name = 名称值对中提供要求并提供了参数是否正确。|
