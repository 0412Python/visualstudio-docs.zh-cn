---
title: "了解模型、 类和关系 |Microsoft 文档"
ms.custom: 
ms.date: 11/04/2016
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- Domain-Specific Language, models
ms.assetid: 2ecd569c-b369-41ea-b78e-a61b62e2e4e9
caps.latest.revision: 35
author: alancameronwills
ms.author: awills
manager: douge
translationtype: Machine Translation
ms.sourcegitcommit: eb2ab9d49cdeb1ed71da8ef67841f7796862dc30
ms.openlocfilehash: 4982dcc5c6fb0184f1f467971b6255aace6bec53
ms.lasthandoff: 02/22/2017

---
# <a name="understanding-models-classes-and-relationships"></a>了解模型、类和关系
域特定语言 (DSL) 是由其 DSL 定义文件定义，以及您可能会编写任何自定义程序代码。 从该文件生成大部分 DSL 解决方案中的程序代码。  
  
 本主题介绍 DSL 定义的主要功能。  
  
## <a name="the-dsl-definition"></a>DSL 定义  
 当您打开`Dsl\DslDefinition.dsl`，[!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)]窗口类似于下图。  
  
 ![dsl 设计器](../modeling/media/dsl_designer.png "dsl_designer")  
  
 在 DSL 定义中最重要的信息显示在 DSL 定义关系图。 其他信息，也是 DslDefinition.dsl 的一部分，显示在 DSL 资源管理器，它通常会显示在关系图的一侧。 您可以使用与最常见的任务中，关系图和使用的更高级自定义 DSL 资源管理器。  
  
 DSL 定义关系图显示了定义模型元素以及定义链接模型元素之间的关系的域类。 它还显示形状和连接线，用来向用户显示的模型元素。  
  
 ![具有泳道的 dsl 设计器](../modeling/media/dsl_desinger.png "dsl_desinger")  
  
 当在 DSL 定义中，关系图上或在 DSL 资源管理器中选择某个项与其相关的信息被显示在属性窗口中。 可能在 DSL 详细信息窗口中显示的其他信息。  
  
### <a name="models-are-instances-of-dsls"></a>模型是 Dsl 的实例  
 一个*模型*是由某个用户创建 DSL 的实例。 模型包含模型元素，它们是您定义的域类和元素，它们是您定义的域关系的实例之间的链接的实例。 一个模型还可以有形状和连接符、 关系图显示的模型元素和链接。 DSL 定义包括形状类、 连接符类和关系图的类。  
  
 DSL 定义即所谓*域模型*。 DSL 定义中或域模型是语言的特定于域的设计时表示，而该模型是语言的域特定语言的运行时实例化。  
  
## <a name="domain-classes-define-model-elements"></a>域类定义模型元素  
 域类用于在域中创建的各种元素，且域关系的元素之间的链接。 它们是设计时表示形式的元素和将实例化的设计特定语言的用户在创建其模型时的链接。  
  
 此图显示了音乐库 DSL 用户已创建一个模型。 由包含的歌曲列表的复选框表示音乐 album。 艺术家圆角框中，由表示和连接到向其分配它们已唱片集。  
  
 ![生成的 DSL 实例模型](../modeling/media/music_instance.png "Music_Instance")  
  
 DSL 定义用于分隔两个方面。 使用形状和连接符类可定义模型关系图上的模型元素的外观。 使用域类和域关系定义在模型中携带的信息。  
  
 下图显示在 DSL 定义中的音乐库的域类和关系。  
  
 ![嵌入关系和引用关系](../modeling/media/music_classes.png "Music_Classes")  
  
 此图例显示了四个域类︰ 音乐、 唱片集、 艺术家和歌曲。 域类定义域属性，例如名称、 标题和等等。 在实例模型中，关系图上显示其中的某些属性的值。  
  
 类之间是域关系︰ MusicHasAlbums、 MusicHasArtists、 AlbumbHasSongs 和 ArtistAppearedOnAlbums。 这些关系具有重数分别为 1..1，如 0..*。 例如，必须与通过 AlbumHasSongs 关系恰好一个唱片集相关的所有首歌。 每个唱片集可以有任意数量的歌曲。  
  
### <a name="rearranging-the-dsl-definition-diagram"></a>重新排列 DSL 定义关系图  
 请注意，域类可以多次出现在 DSL 定义关系图中，此图片唱片集一样。 是，始终存在一个主要的视图，并且可能有一些*引用*视图。  
  
 若要重新排列 DSL 定义关系图，您可以︰  
  
-   交换主并通过引用视图**将树放在此处**和**拆分树**命令。 右键单击一个单一域类，以查看这些命令。  
  
-   通过按 Ctrl + Up 和 Ctrl + 向下进行重新排序的域类和形状类。  
  
-   折叠或展开类的每个形状的右上角处使用的图标。  
  
-   通过单击底部的域类减号 （-） 折叠树的部分。  
  
## <a name="inheritance"></a>继承  
 可以使用继承定义域类。 若要创建继承派生，单击继承工具、 单击派生的类，然后单击类的基类。 模型元素具有其自己的域类，以及从基类继承的所有属性定义的所有属性。 它还会继承关系中的其角色。  
  
 之间的关系、 形状和连接线，还可以使用继承。 继承必须保持同一个组中。 一种形状不能继承域类。  
  
## <a name="domain-relationships"></a>域关系  
 可以通过关系链接模型元素。 链接始终是二进制的;它们链接正好两个元素。 但是，任何元素都可以有很多链接到其他对象，并且甚至可以对同一元素之间的多个链接。  
  
 正如您可以定义不同类的元素，您可以定义不同类别的链接。 链接的类称为*域关系*。 域关系指定其实例可连接元素哪些类。 关系的每一端称为*角色*，并且域之间的关系定义的两个角色以及关系本身的名称。  
  
 有两种类型的域关系︰ 嵌入关系和引用关系。 在 DSL 定义关系图中，嵌入关系可以从每个角色，实线和引用关系具有虚线行。  
  
### <a name="embedding-relationships"></a>嵌入关系  
 在模型中，但其根除外的每个元素是链接的一个嵌入的目标。 因此，整个模型构成单个树的嵌入的链接。 嵌入关系表示包含关系和所有权。 在这种方式相关的两个模型元素也称为为 parent 和 child。 子声称可嵌入到父级。  
  
 嵌入的链接并不通常显示显式为关系图上的连接器。 相反，它们通常包含由表示。 嵌入其中的元素显示为关系图上的形状和由关系图中，表示模型的根。  
  
 在示例中，根类 Music 具有嵌入关系 MusicHasAlbums 到具有嵌入 AlbumHasSongs 到 Song 的相册。 歌曲显示为每个唱片集内的列表中的项。 音乐还具有嵌入 MusicHasArtists 到艺术家类，其实例也显示为关系图上的形状。  
  
 默认情况下，删除其某个父级时，会自动删除嵌入的元素。  
  
 当保存模型以 XML 格式文件，嵌入的元素都嵌套在其某个父级，除非您已自定义序列化。  
  
> [!NOTE]
>  嵌入与继承不同。 在嵌入关系的子级不会继承父元素的属性。 嵌入是链接的一种模型元素之间。 继承是类，类之间的关系，并且不创建模型元素之间的链接。  
  
### <a name="embedding-rules"></a>嵌入的规则  
 实例模型中的每个元素必须恰好一个嵌入的链接，该模型的根除外的目标。  
  
 因此，每个非抽象域类，除了根类，必须至少一个嵌入关系的目标或它必须嵌入从基类继承。 一个类可以是两个或多个嵌入的目标，但其实例模型元素一次只能有一个父级。 从目标到源的多重性必须为 0..1 或 1..1。  
  
### <a name="the-explorer-displays-the-embedding-tree"></a>浏览器可显示嵌入树  
 DSL 定义还会创建 explorer 中，用户会看到其模型关系图旁边。  
  
 ![生成资源管理器的 DSL](~/docs/modeling/media/music_explorer.png "Music_Explorer")  
  
 资源管理器在模型中，甚至那些不为其定义的所有形状显示的所有元素。 它显示的元素以及嵌入关系，但不是能引用关系。  
  
 若要查看某个元素的域属性的值，用户的模型关系图或模型浏览器中，选择一个元素，并打开属性窗口。 它显示所有域属性，包括那些未显示关系图上。 在示例中，每首歌曲具有标题和一种风格，但只有标题的值显示在关系图上。  
  
## <a name="reference-relationships"></a>引用关系  
 引用关系表示任何一种而非嵌入的关系。  
  
 引用关系通常在关系图上显示为形状之间的连接器。  
  
 在模型的 XML 表示中，用表示两个元素之间的引用链接*名字对象。* 也就是说，名字对象是唯一标识模型中的每个元素的名称。 每个模型元素的 XML 节点包含指定的关系的名称和其他元素的标记的节点。  
  
## <a name="roles"></a>角色  
 每个域之间的关系具有两个角色、 源角色和目标角色。  
  
 在下面的图中，之间的界线**Publisher**域类和**PublisherCatalog**域之间的关系是源角色。 域关系之间的线条和**唱片集**域类是目标角色。  
  
 ![角色和属性。] (~/docs/modeling/media/propertycode.png "PropertyCode")  
  
 编写遍历模型的程序代码时，与关系相关联的名称是特别重要。 例如，在生成 DSL 解决方案时，发布服务器生成的类将有一个属性是集合的唱片集的目录。 唱片集的类具有一个属性是类发布服务器具有单个实例的发布服务器。  
  
 当在 DSL 定义中创建关系时，属性和关系的名称将被赋予默认值。 但是，你可以更改它们。  
  
## <a name="multiplicities"></a>重数  
 重数分别为指定的元素数量可域关系中具有相同的角色。 在示例中，对多零 (0..\*) 上的重数设置**目录**角色指定的任何实例**发布服务器**域类可以有任意多个**PublisherCatalog**关系链接可为其指定所需。  
  
 通过键入关系图上或通过修改配置 role 的多重性`Multiplicity`中的属性**属性**窗口。 下表描述此属性的设置。  
  
|重数类型|说明|  
|-----------------------|-----------------|  
|0..* （从零到多个）|域类的每个实例可以有多个实例的关系的任何实例。|  
|0..1 (0 到&1;)|域类的每个实例可以存在多个实例的关系的任何实例。|  
|1..1 （一个）|域类的每个实例可以有一个实例的关系。 无法从任何角色类的实例创建此关系的多个实例。 如果启用验证，则角色类的任何实例都不具有关系的任何实例时，将显示验证错误。|  
|1..* （一对多）|上有此多重性的角色的类的每个实例可以有多个实例的关系，并且每个实例必须具有至少一个实例的关系。 如果启用验证，则角色类的任何实例都不具有关系的任何实例时，将显示验证错误。|  
  
## <a name="domain-relationships-as-classes"></a>作为类的域关系  
 链接表示在作为 LinkElement，它是模型元素的派生的类的实例存储区中。 可以在域关系的域模型关系图中定义这些属性。  
  
 您还可以使关系的源或目标的其他关系。 在域模型关系图中，右键单击域之间的关系，然后单击**显示为类**。 将一个附加的类框。 然后可以连接到它的关系。  
  
 就像可以使用域类，可以部分地由继承中，定义关系。 选择派生的关系，并设置**基本关系**属性窗口中。  
  
 派生的关系专门负责其基本关系。 域类的链接应派生自它或与所链接的基本关系的类相同。 在模型中创建派生关系的链接时，它是派生和基关系的实例。 在程序代码中，您可以导航到使用由基或派生类生成的属性链接另一端。  
  
## <a name="see-also"></a>另请参阅  
 [域特定语言工具词汇表](http://msdn.microsoft.com/en-us/ca5e84cb-a315-465c-be24-76aa3df276aa)

