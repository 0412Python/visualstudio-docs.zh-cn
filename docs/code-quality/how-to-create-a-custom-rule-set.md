---
title: "如何：创建自定义规则集 | Microsoft Docs"
ms.custom: ""
ms.date: "12/16/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "vs-devops-test"
ms.tgt_pltfrm: ""
ms.topic: "article"
f1_keywords: 
  - "vs.codeanalysis.addremoverulesets"
helpviewer_keywords: 
  - "Development Edition, 规则集"
ms.assetid: bcc42508-9592-4802-9f66-a50111641d73
caps.latest.revision: 24
caps.handback.revision: 24
author: "stevehoag"
ms.author: "shoag"
manager: "wpickett"
---
# 如何：创建自定义规则集
[!INCLUDE[vs2017banner](../code-quality/includes/vs2017banner.md)]

在 [!INCLUDE[vsUltShort](../code-quality/includes/vsultshort_md.md)], [!INCLUDE[vsPreShort](../code-quality/includes/vspreshort_md.md)] 以及 [!INCLUDE[vsPro](../code-quality/includes/vspro_md.md)] 中，您可以创建和修改自定义*规则集* ，以满足与代码分析相关联的特定项目需要。  若要创建自定义规则集，请在规则集编辑器中打开一个或多个标准规则集。  然后，可以添加或移除特定规则，并且可以更改当代码分析确定违反规则时发生的操作。  
  
 若要创建新的自定义规则集，请使用新文件名保存它。  自定义规则集会自动分配给项目。  
  
## 打开规则集编辑器  
  
#### 在规则集编辑器中打开空规则集文件  
  
1.  在 [!INCLUDE[vs_current_short](../code-quality/includes/vs_current_short_md.md)] 的**“文件”**菜单上，指向**“新建”**，然后单击**“文件”**。  
  
2.  在**“新建文件”**对话框中，单击**“已安装的模板”**列表中的**“常规”**，然后选择**“代码分析规则集”**。  
  
3.  随即将显示规则集编辑器。  编辑器列表中没有已选中的规则。  
  
#### 从单个现有规则集创建自定义规则  
  
1.  在解决方案资源管理器中，右击项目，然后选择**“属性”**。  
  
2.  在**“属性”**选项卡中，单击**“代码分析”**。  
  
3.  在**“规则集”**下拉列表中，执行以下操作之一：  
  
    -   选择要自定义的规则集。  
  
     \- 或 \-  
  
    -   选择 **\<浏览\>** 指定列表外部的现有规则集。  
  
4.  单击**“打开”**以在规则集编辑器中显示规则。  
  
#### 从多个现有规则集创建自定义规则集  
  
1.  在解决方案资源管理器中，右击项目，然后选择**“属性”**。  
  
2.  在**“属性”**选项卡中，单击**“代码分析”**。  
  
3.  从 **运行此规则集** 中 **\<选择多个规则集\>**.  
  
4.  在**“添加或移除规则集”**对话框中，选择要作为新规则集基础的规则集，然后单击**“确定”**。  
  
5.  保存新规则集。  
  
     新规则集的名称在**“运行此规则集”**列表中处于选中状态。  在下一步中可以更改规则集的显示名称。  
  
6.  （可选）若要更改规则集的显示名称，请在**“视图”**菜单上单击**“属性窗口”**。  在**“名称”**框中键入显示名称。  
  
7.  若要在新规则集中添加、移除或修改特定代码分析规则，请单击**“打开”**。  
  
## 修改规则集  
  
#### 在规则集编辑器中修改规则集  
  
-   若要更改规则集的显示名称，请在**“视图”**菜单上单击**“属性窗口”**。  在**“名称”**框中输入显示名称。  请注意，显示名称可以与文件名不同。  
  
-   若要将组的所有规则添加到自定义规则集，请选中组的复选框。  若要移除组的所有规则，请清除该复选框。  
  
-   若要将特定规则添加到自定义规则集，请选中该规则的复选框。  若要从规则集内移除规则，请清除该复选框。  
  
-   若要更改在代码分析运行中违反规则时应采取的操作，请单击规则的**“操作”**字段，然后选择下列值之一：  
  
     **Warn** \- 生成警告。  
  
     **Error** \- 生成错误。  
  
     **None** \- 禁用规则。  此操作相当于从规则集内移除规则。  
  
## 更改规则集编辑器的显示  
  
#### 使用规则集编辑器工具栏对规则集编辑器中的字段进行分组、筛选或更改  
  
-   若要在所有组中展开规则，请单击**“全部展开”**。  
  
-   若要在所有组中折叠规则，请单击**“全部折叠”**。  
  
-   若要更改规则分组所依据的字段，请从**“分组依据”**列表中选择字段。  若要显示未分组的规则，请选择 **\<无\>**.  
  
-   若要在规则列中添加或移除字段，请单击**“列选项”**。  
  
-   若要隐藏不适用于当前解决方案的规则，请单击**“隐藏不适用于当前解决方案的规则”**。  
  
-   若要切换显示和隐藏分配了“错误”操作的规则，请单击**“显示可以生成代码分析错误的规则”**。  
  
-   若要切换显示和隐藏分配了“警告”操作的规则，请单击**“显示可以生成代码分析警告的规则”**。  
  
-   若要在显示和隐藏指定了**“无”**操作的规则两种模式间进行切换，请单击**“显示未启用的规则”**。  
  
-   若要在当前规则集内添加或移除 Microsoft 默认规则集，请单击**“添加或移除子规则集”**。  
  
## 请参阅  
 [如何：配置托管代码项目的代码分析](../code-quality/how-to-configure-code-analysis-for-a-managed-code-project.md)   
 [代码分析规则集参考](../code-quality/code-analysis-rule-set-reference.md)