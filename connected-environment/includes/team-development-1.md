到目前为止，我们已经运行了应用程序代码，但感觉我们像是应用的唯一开发者。 在本节中，我们将介绍通连环境如何实现简化团队开发过程：
* 让开发者团队能够在相同的开发环境中工作。
* 让每位开发者都能够独立地迭代自己的代码，无需担心会破坏他人的代码。
* 在代码提交之前进行端到端的代码测试，无需创建模拟或模拟依赖项。

## <a name="challenges-with-developing-microservices"></a>开发微服务的挑战
我们的示例应用程序目前并不十分复杂。 但是在实际开发中，由于会添加更多的服务以及开发团队不断发展壮大，很快会涌现出新的挑战。

想象一下自己正在处理一项与众多其他服务进行交互的服务。

1. 将所有内容都放在本地开发是不现实的。 你的开发计算机可能不具备可以运行整个应用的足够资源。 或者，也许你的应用具有需要可公开访问的终结点（例如，应用会响应来自 SaaS 应用的 Webhook）。
1. 可以尝试只运行你所依赖的服务，但这意味着需要知道依赖项的完全闭包（例如，依赖项的依赖项）。 或者，问题在于因为没有亲自操作，而无法轻松了解如何生成和运行依赖项。
1. 某些开发者会诉诸于模拟自己的许多服务依赖项。 这种方式有时能起到一些作用，但管理这些模拟很快就会成为自身的开发负担。 此外，这会导致开发环境与生产看上去相差甚远，同时可能会悄悄引入许多细小的错误。
1. 这使得执行任何类型的端到端测试都变得困难。 实际上，集成测试只能发生在提交后，这意味着在开发周期的后期会遇到问题。

![](../media/microservices-challenges.png)


## <a name="work-in-a-shared-development-environment"></a>在共享开发环境下工作
借助通连环境，可在 Azure 中设置共享开发环境。 每位开发者都可以专注于自己负责的应用程序部分，并可以在已包含其方案所依赖的所有其他服务和云资源的环境中迭代开发预提交代码。 依赖项始终保持最新，开发者能够以真实反映生产的方式进行工作。

## <a name="work-in-your-own-space"></a>在私有空间内工作
为服务开发代码时，在准备好签入代码之前，代码往往未处于良好状态。 仍需要对代码进行反复地修改测试并试验解决方案。 通连环境提供了空间的概念，可让你独立工作，无需担心会破坏团队成员的工作成果。

> [!Note]
> 在继续之前，请关闭这两种服务的所有 VS Code 窗口，然后在每种服务的根文件夹中运行 `vsce up -d`。 （这是预览版限制。）

再来详细了解一下服务的当前运行位置。 运行 `vsce list` 命令，你将看到类似下面的输出：

```
Name         Space     Chart              Ports   Updated     Access Points
-----------  --------  -----------------  ------  ----------  -------------------------
mywebapi     mainline  mywebapi-0.1.0     80/TCP  2m ago     <not attached>
webfrontend  mainline  webfrontend-0.1.0  80/TCP  1m ago     https://webfrontend-contosodev.vsce.io
```

“空间”列显示这两种服务当前都在名为 `mainline` 的空间中运行。 任何打开公共 URL 并导航到 Web 应用的人都会调用我们之前编写的代码路径，这些代码路径通过这两种服务运行。 现在假设我们要继续开发 `mywebapi`。 要继续开发同时不打断正在使用开发环境的其他开发者应该怎么办？ 为此，我们需要设置私有空间。

## <a name="create-a-space"></a>创建空间
若要在 `mainline` 以外的空间运行自己的 `mywebapi` 版本，需要创建私有空间：
``` 
vsce space create --name scott
```

在上面的示例中，我使用了我的名字作为新空间的名称，以便我的同事可以认出这是我工作的空间，但你可以将其命名为任何名称，灵活地表达它的含义，例如“sprint4”或“demo”。 

运行 `vsce space list` 命令，查看开发环境中所有空间的列表。 在当前选定的空间旁会出现星号 (*)。 在此示例中，在创建时自动选中了名为“scott”的空间。 可以随时使用 `vsce space select` 命令选择其他空间。
